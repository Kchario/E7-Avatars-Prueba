!function(){"use strict";function Vnode(tag,key,attrs0,children0,text,dom){return{tag:tag,key:key,attrs:attrs0,children:children0,text:text,dom:dom,domSize:void 0,state:void 0,events:void 0,instance:void 0}}Vnode.normalize=function(node){return Array.isArray(node)?Vnode("[",void 0,void 0,Vnode.normalizeChildren(node),void 0,void 0):null==node||"boolean"==typeof node?null:"object"==typeof node?node:Vnode("#",void 0,void 0,String(node),void 0,void 0)},Vnode.normalizeChildren=function(input){var children0=[];if(input.length){for(var isKeyed=null!=input[0]&&null!=input[0].key,i=1;i<input.length;i++)if((null!=input[i]&&null!=input[i].key)!=isKeyed)throw new TypeError("Vnodes must either always have keys or never have keys!");for(i=0;i<input.length;i++)children0[i]=Vnode.normalize(input[i])}return children0};function hyperscriptVnode(){var children1,attrs1=arguments[this],start=this+1;if(null==attrs1?attrs1={}:"object"==typeof attrs1&&null==attrs1.tag&&!Array.isArray(attrs1)||(attrs1={},start=this),arguments.length===start+1)children1=arguments[start],Array.isArray(children1)||(children1=[children1]);else for(children1=[];start<arguments.length;)children1.push(arguments[start++]);return Vnode("",attrs1.key,attrs1,children1)}var selectorParser=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,selectorCache={},hasOwn={}.hasOwnProperty;function isEmpty(object){for(var key in object)if(hasOwn.call(object,key))return!1;return!0}function hyperscript(selector){if(null==selector||"string"!=typeof selector&&"function"!=typeof selector&&"function"!=typeof selector.view)throw Error("The selector must be either a string or a component.");var vnode=hyperscriptVnode.apply(1,arguments);return"string"==typeof selector&&(vnode.children=Vnode.normalizeChildren(vnode.children),"["!==selector)?function(state,vnode){var attrs=vnode.attrs,children=Vnode.normalizeChildren(vnode.children),hasClass=hasOwn.call(attrs,"class"),className=hasClass?attrs.class:attrs.className;if(vnode.tag=state.tag,vnode.attrs=null,vnode.children=void 0,!isEmpty(state.attrs)&&!isEmpty(attrs)){var newAttrs={};for(var key in attrs)hasOwn.call(attrs,key)&&(newAttrs[key]=attrs[key]);attrs=newAttrs}for(var key in state.attrs)hasOwn.call(state.attrs,key)&&"className"!==key&&!hasOwn.call(attrs,key)&&(attrs[key]=state.attrs[key]);for(var key in null==className&&null==state.attrs.className||(attrs.className=null!=className?null!=state.attrs.className?String(state.attrs.className)+" "+String(className):className:null!=state.attrs.className?state.attrs.className:null),hasClass&&(attrs.class=null),attrs)if(hasOwn.call(attrs,key)&&"key"!==key){vnode.attrs=attrs;break}return Array.isArray(children)&&1===children.length&&null!=children[0]&&"#"===children[0].tag?vnode.text=children[0].children:vnode.children=children,vnode}(selectorCache[selector]||function(selector){for(var match,tag="div",classes=[],attrs={};match=selectorParser.exec(selector);){var type=match[1],value=match[2];if(""===type&&""!==value)tag=value;else if("#"===type)attrs.id=value;else if("."===type)classes.push(value);else if("["===match[3][0]){var attrValue=match[6];attrValue=attrValue&&attrValue.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\"),"class"===match[4]?classes.push(attrValue):attrs[match[4]]=""===attrValue?attrValue:attrValue||!0}}return 0<classes.length&&(attrs.className=classes.join(" ")),selectorCache[selector]={tag:tag,attrs:attrs}}(selector),vnode):(vnode.tag=selector,vnode)}if(hyperscript.trust=function(html){return null==html&&(html=""),Vnode("<",void 0,void 0,html,void 0,void 0)},hyperscript.fragment=function(){var vnode2=hyperscriptVnode.apply(0,arguments);return vnode2.tag="[",vnode2.children=Vnode.normalizeChildren(vnode2.children),vnode2},(PromisePolyfill=function(executor){if(!(this instanceof PromisePolyfill))throw new Error("Promise must be called with `new`");if("function"!=typeof executor)throw new TypeError("executor must be a function");var self=this,resolvers=[],rejectors=[],resolveCurrent=handler(resolvers,!0),rejectCurrent=handler(rejectors,!1),instance=self._instance={resolvers:resolvers,rejectors:rejectors},callAsync="function"==typeof setImmediate?setImmediate:setTimeout;function handler(list,shouldAbsorb){return function execute(value){var then;try{if(!shouldAbsorb||null==value||"object"!=typeof value&&"function"!=typeof value||"function"!=typeof(then=value.then))callAsync(function(){shouldAbsorb||0!==list.length||console.error("Possible unhandled promise rejection:",value);for(var i=0;i<list.length;i++)list[i](value);resolvers.length=0,rejectors.length=0,instance.state=shouldAbsorb,instance.retry=function(){execute(value)}});else{if(value===self)throw new TypeError("Promise can't be resolved w/ itself");executeOnce(then.bind(value))}}catch(e){rejectCurrent(e)}}}function executeOnce(then){var runs=0;function run(fn){return function(value){0<runs++||fn(value)}}var onerror=run(rejectCurrent);try{then(run(resolveCurrent),onerror)}catch(e){onerror(e)}}executeOnce(executor)}).prototype.then=function(onFulfilled,onRejection){var resolveNext,rejectNext,instance=this._instance;function handle(callback,list,next,state){list.push(function(value){if("function"!=typeof callback)next(value);else try{resolveNext(callback(value))}catch(e){rejectNext&&rejectNext(e)}}),"function"==typeof instance.retry&&state===instance.state&&instance.retry()}var promise=new PromisePolyfill(function(resolve,reject){resolveNext=resolve,rejectNext=reject});return handle(onFulfilled,instance.resolvers,resolveNext,!0),handle(onRejection,instance.rejectors,rejectNext,!1),promise},PromisePolyfill.prototype.catch=function(onRejection){return this.then(null,onRejection)},PromisePolyfill.prototype.finally=function(callback){return this.then(function(value){return PromisePolyfill.resolve(callback()).then(function(){return value})},function(reason){return PromisePolyfill.resolve(callback()).then(function(){return PromisePolyfill.reject(reason)})})},PromisePolyfill.resolve=function(value){return value instanceof PromisePolyfill?value:new PromisePolyfill(function(resolve){resolve(value)})},PromisePolyfill.reject=function(value){return new PromisePolyfill(function(resolve,reject){reject(value)})},PromisePolyfill.all=function(list){return new PromisePolyfill(function(resolve,reject){var total=list.length,count=0,values=[];if(0===list.length)resolve([]);else for(var i=0;i<list.length;i++)!function(i){function consume(value){count++,values[i]=value,count===total&&resolve(values)}null==list[i]||"object"!=typeof list[i]&&"function"!=typeof list[i]||"function"!=typeof list[i].then?consume(list[i]):list[i].then(consume,reject)}(i)})},PromisePolyfill.race=function(list){return new PromisePolyfill(function(resolve,reject){for(var i=0;i<list.length;i++)list[i].then(resolve,reject)})},"undefined"!=typeof window){void 0===window.Promise?window.Promise=PromisePolyfill:window.Promise.prototype.finally||(window.Promise.prototype.finally=PromisePolyfill.prototype.finally);var PromisePolyfill=window.Promise}else if("undefined"!=typeof global){void 0===global.Promise?global.Promise=PromisePolyfill:global.Promise.prototype.finally||(global.Promise.prototype.finally=PromisePolyfill.prototype.finally);PromisePolyfill=global.Promise}var $window,currentRedraw,$doc,nameSpace,possibleParents,lisTemp,uppercaseRegex,render=($window=window,$doc=$window&&$window.document,nameSpace={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},possibleParents={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"},lisTemp=[],uppercaseRegex=/[A-Z]/g,(EventDict.prototype=Object.create(null)).handleEvent=function(ev){var result,handler0=this["on"+ev.type];"function"==typeof handler0?result=handler0.call(ev.currentTarget,ev):"function"==typeof handler0.handleEvent&&handler0.handleEvent(ev),this._&&!1!==ev.redraw&&(0,this._)(),!1===result&&(ev.preventDefault(),ev.stopPropagation())},function(dom,vnodes,redraw){if(!dom)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var hooks=[],active=activeElement(),namespace=dom.namespaceURI;null==dom.vnodes&&(dom.textContent=""),vnodes=Vnode.normalizeChildren(Array.isArray(vnodes)?vnodes:[vnodes]);var prevRedraw=currentRedraw;try{currentRedraw="function"==typeof redraw?redraw:void 0,updateNodes(dom,dom.vnodes,vnodes,hooks,null,"http://www.w3.org/1999/xhtml"===namespace?void 0:namespace)}finally{currentRedraw=prevRedraw}dom.vnodes=vnodes,null!=active&&activeElement()!==active&&"function"==typeof active.focus&&active.focus();for(var i=0;i<hooks.length;i++)hooks[i]()});function getNameSpace(vnode3){return vnode3.attrs&&vnode3.attrs.xmlns||nameSpace[vnode3.tag]}function checkState(vnode3,original){if(vnode3.state!==original)throw new Error("`vnode.state` must not be modified")}function callHook(vnode3){var original=vnode3.state;try{return this.apply(original,arguments)}finally{checkState(vnode3,original)}}function activeElement(){try{return $doc.activeElement}catch(e){return null}}function createNodes(parent,vnodes,start,end,hooks,nextSibling,ns){for(var i=start;i<end;i++){var vnode3=vnodes[i];null!=vnode3&&createNode(parent,vnode3,hooks,ns,nextSibling)}}function createNode(parent,vnode3,hooks,ns,nextSibling){var tag=vnode3.tag;if("string"==typeof tag)switch(vnode3.state={},null!=vnode3.attrs&&initLifecycle(vnode3.attrs,vnode3,hooks),tag){case"#":!function(parent,vnode3,nextSibling){vnode3.dom=$doc.createTextNode(vnode3.children),insertNode(parent,vnode3.dom,nextSibling)}(parent,vnode3,nextSibling);break;case"<":createHTML(parent,vnode3,ns,nextSibling);break;case"[":!function(parent,vnode3,hooks,ns,nextSibling){var fragment=$doc.createDocumentFragment();if(null!=vnode3.children){var children3=vnode3.children;createNodes(fragment,children3,0,children3.length,hooks,null,ns)}vnode3.dom=fragment.firstChild,vnode3.domSize=fragment.childNodes.length,insertNode(parent,fragment,nextSibling)}(parent,vnode3,hooks,ns,nextSibling);break;default:!function(parent,vnode3,hooks,ns,nextSibling){var tag=vnode3.tag,attrs2=vnode3.attrs,is=attrs2&&attrs2.is,element=(ns=getNameSpace(vnode3)||ns)?is?$doc.createElementNS(ns,tag,{is:is}):$doc.createElementNS(ns,tag):is?$doc.createElement(tag,{is:is}):$doc.createElement(tag);vnode3.dom=element,null!=attrs2&&function(vnode3,attrs2,ns){for(var key in attrs2)setAttr(vnode3,key,null,attrs2[key],ns)}(vnode3,attrs2,ns);if(insertNode(parent,element,nextSibling),!maybeSetContentEditable(vnode3)&&(null!=vnode3.text&&(""!==vnode3.text?element.textContent=vnode3.text:vnode3.children=[Vnode("#",void 0,void 0,vnode3.text,void 0,void 0)]),null!=vnode3.children)){var children3=vnode3.children;createNodes(element,children3,0,children3.length,hooks,null,ns),"select"===vnode3.tag&&null!=attrs2&&function(vnode3,attrs2){if("value"in attrs2)if(null===attrs2.value)-1!==vnode3.dom.selectedIndex&&(vnode3.dom.value=null);else{var normalized=""+attrs2.value;vnode3.dom.value===normalized&&-1!==vnode3.dom.selectedIndex||(vnode3.dom.value=normalized)}"selectedIndex"in attrs2&&setAttr(vnode3,"selectedIndex",null,attrs2.selectedIndex,void 0)}(vnode3,attrs2)}}(parent,vnode3,hooks,ns,nextSibling)}else!function(parent,vnode3,hooks,ns,nextSibling){(function(vnode3,hooks){var sentinel;if("function"==typeof vnode3.tag.view){if(vnode3.state=Object.create(vnode3.tag),null!=(sentinel=vnode3.state.view).$$reentrantLock$$)return;sentinel.$$reentrantLock$$=!0}else{if(vnode3.state=void 0,null!=(sentinel=vnode3.tag).$$reentrantLock$$)return;sentinel.$$reentrantLock$$=!0,vnode3.state=null!=vnode3.tag.prototype&&"function"==typeof vnode3.tag.prototype.view?new vnode3.tag(vnode3):vnode3.tag(vnode3)}initLifecycle(vnode3.state,vnode3,hooks),null!=vnode3.attrs&&initLifecycle(vnode3.attrs,vnode3,hooks);if(vnode3.instance=Vnode.normalize(callHook.call(vnode3.state.view,vnode3)),vnode3.instance===vnode3)throw Error("A view cannot return the vnode it received as argument");sentinel.$$reentrantLock$$=null})(vnode3,hooks),null!=vnode3.instance?(createNode(parent,vnode3.instance,hooks,ns,nextSibling),vnode3.dom=vnode3.instance.dom,vnode3.domSize=null!=vnode3.dom?vnode3.instance.domSize:0):vnode3.domSize=0}(parent,vnode3,hooks,ns,nextSibling)}function createHTML(parent,vnode3,ns,nextSibling){var match0=vnode3.children.match(/^\s*?<(\w+)/im)||[],temp=$doc.createElement(possibleParents[match0[1]]||"div");"http://www.w3.org/2000/svg"===ns?(temp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+vnode3.children+"</svg>",temp=temp.firstChild):temp.innerHTML=vnode3.children,vnode3.dom=temp.firstChild,vnode3.domSize=temp.childNodes.length,vnode3.instance=[];for(var child,fragment=$doc.createDocumentFragment();child=temp.firstChild;)vnode3.instance.push(child),fragment.appendChild(child);insertNode(parent,fragment,nextSibling)}function updateNodes(parent,old,vnodes,hooks,nextSibling,ns){if(old!==vnodes&&(null!=old||null!=vnodes))if(null==old||0===old.length)createNodes(parent,vnodes,0,vnodes.length,hooks,nextSibling,ns);else if(null==vnodes||0===vnodes.length)removeNodes(parent,old,0,old.length);else{var isOldKeyed=null!=old[0]&&null!=old[0].key,isKeyed0=null!=vnodes[0]&&null!=vnodes[0].key,start=0,oldStart=0;if(!isOldKeyed)for(;oldStart<old.length&&null==old[oldStart];)oldStart++;if(!isKeyed0)for(;start<vnodes.length&&null==vnodes[start];)start++;if(null===isKeyed0&&null==isOldKeyed)return;if(isOldKeyed!=isKeyed0)removeNodes(parent,old,oldStart,old.length),createNodes(parent,vnodes,start,vnodes.length,hooks,nextSibling,ns);else if(isKeyed0){for(var o,v,oe,ve,topSibling,oldEnd=old.length-1,end=vnodes.length-1;oldStart<=oldEnd&&start<=end&&(oe=old[oldEnd],ve=vnodes[end],oe.key===ve.key);)oe!==ve&&updateNode(parent,oe,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),oldEnd--,end--;for(;oldStart<=oldEnd&&start<=end&&(o=old[oldStart],v=vnodes[start],o.key===v.key);)oldStart++,start++,o!==v&&updateNode(parent,o,v,hooks,getNextSibling(old,oldStart,nextSibling),ns);for(;oldStart<=oldEnd&&start<=end&&start!==end&&o.key===ve.key&&oe.key===v.key;)moveNodes(parent,oe,topSibling=getNextSibling(old,oldStart,nextSibling)),oe!==v&&updateNode(parent,oe,v,hooks,topSibling,ns),++start<=--end&&moveNodes(parent,o,nextSibling),o!==ve&&updateNode(parent,o,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),oldStart++,oe=old[--oldEnd],ve=vnodes[end],o=old[oldStart],v=vnodes[start];for(;oldStart<=oldEnd&&start<=end&&oe.key===ve.key;)oe!==ve&&updateNode(parent,oe,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),end--,oe=old[--oldEnd],ve=vnodes[end];if(end<start)removeNodes(parent,old,oldStart,oldEnd+1);else if(oldEnd<oldStart)createNodes(parent,vnodes,start,end+1,hooks,nextSibling,ns);else{var map,lisIndices,originalNextSibling=nextSibling,vnodesLength=end-start+1,oldIndices=new Array(vnodesLength),li=0,i=0,pos=2147483647,matched=0;for(i=0;i<vnodesLength;i++)oldIndices[i]=-1;for(i=end;start<=i;i--){null==map&&(map=getKeyMap(old,oldStart,oldEnd+1));var oldIndex=map[(ve=vnodes[i]).key];null!=oldIndex&&(pos=oldIndex<pos?oldIndex:-1,oe=old[oldIndices[i-start]=oldIndex],old[oldIndex]=null,oe!==ve&&updateNode(parent,oe,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),matched++)}if(nextSibling=originalNextSibling,matched!==oldEnd-oldStart+1&&removeNodes(parent,old,oldStart,oldEnd+1),0===matched)createNodes(parent,vnodes,start,end+1,hooks,nextSibling,ns);else if(-1===pos)for(li=(lisIndices=function(a){var result=[0],u=0,v=0,i=0,il=lisTemp.length=a.length;for(i=0;i<il;i++)lisTemp[i]=a[i];for(i=0;i<il;++i)if(-1!==a[i]){var j=result[result.length-1];if(a[j]<a[i])lisTemp[i]=j,result.push(i);else{for(u=0,v=result.length-1;u<v;){var c=(u>>>1)+(v>>>1)+(u&v&1);a[result[c]]<a[i]?u=1+c:v=c}a[i]<a[result[u]]&&(0<u&&(lisTemp[i]=result[u-1]),result[u]=i)}}u=result.length,v=result[u-1];for(;0<u--;)result[u]=v,v=lisTemp[v];return lisTemp.length=0,result}(oldIndices)).length-1,i=end;start<=i;i--)v=vnodes[i],-1===oldIndices[i-start]?createNode(parent,v,hooks,ns,nextSibling):lisIndices[li]===i-start?li--:moveNodes(parent,v,nextSibling),null!=v.dom&&(nextSibling=vnodes[i].dom);else for(i=end;start<=i;i--)v=vnodes[i],-1===oldIndices[i-start]&&createNode(parent,v,hooks,ns,nextSibling),null!=v.dom&&(nextSibling=vnodes[i].dom)}}else{var commonLength=old.length<vnodes.length?old.length:vnodes.length;for(start=start<oldStart?start:oldStart;start<commonLength;start++)(o=old[start])===(v=vnodes[start])||null==o&&null==v||(null==o?createNode(parent,v,hooks,ns,getNextSibling(old,start+1,nextSibling)):null==v?removeNode(parent,o):updateNode(parent,o,v,hooks,getNextSibling(old,start+1,nextSibling),ns));old.length>commonLength&&removeNodes(parent,old,start,old.length),vnodes.length>commonLength&&createNodes(parent,vnodes,start,vnodes.length,hooks,nextSibling,ns)}}}function updateNode(parent,old,vnode3,hooks,nextSibling,ns){var oldTag=old.tag;if(oldTag===vnode3.tag){if(vnode3.state=old.state,vnode3.events=old.events,function(vnode3,old){do{var force;if(null!=vnode3.attrs&&"function"==typeof vnode3.attrs.onbeforeupdate)if(void 0!==(force=callHook.call(vnode3.attrs.onbeforeupdate,vnode3,old))&&!force)break;if("string"!=typeof vnode3.tag&&"function"==typeof vnode3.state.onbeforeupdate)if(void 0!==(force=callHook.call(vnode3.state.onbeforeupdate,vnode3,old))&&!force)break;return!1}while(0);return vnode3.dom=old.dom,vnode3.domSize=old.domSize,vnode3.instance=old.instance,vnode3.attrs=old.attrs,vnode3.children=old.children,vnode3.text=old.text,!0}(vnode3,old))return;if("string"==typeof oldTag)switch(null!=vnode3.attrs&&updateLifecycle(vnode3.attrs,vnode3,hooks),oldTag){case"#":!function(old,vnode3){old.children.toString()!==vnode3.children.toString()&&(old.dom.nodeValue=vnode3.children);vnode3.dom=old.dom}(old,vnode3);break;case"<":!function(parent,old,vnode3,ns,nextSibling){old.children!==vnode3.children?(removeHTML(parent,old),createHTML(parent,vnode3,ns,nextSibling)):(vnode3.dom=old.dom,vnode3.domSize=old.domSize,vnode3.instance=old.instance)}(parent,old,vnode3,ns,nextSibling);break;case"[":!function(parent,old,vnode3,hooks,nextSibling,ns){updateNodes(parent,old.children,vnode3.children,hooks,nextSibling,ns);var domSize=0,children3=vnode3.children;if(vnode3.dom=null,null!=children3){for(var i=0;i<children3.length;i++){var child=children3[i];null!=child&&null!=child.dom&&(null==vnode3.dom&&(vnode3.dom=child.dom),domSize+=child.domSize||1)}1!==domSize&&(vnode3.domSize=domSize)}}(parent,old,vnode3,hooks,nextSibling,ns);break;default:!function(old,vnode3,hooks,ns){var element=vnode3.dom=old.dom;ns=getNameSpace(vnode3)||ns,"textarea"===vnode3.tag&&(null==vnode3.attrs&&(vnode3.attrs={}),null!=vnode3.text&&(vnode3.attrs.value=vnode3.text,vnode3.text=void 0));(function(vnode3,old,attrs2,ns){if(null!=attrs2)for(var key in attrs2)setAttr(vnode3,key,old&&old[key],attrs2[key],ns);var val;if(null!=old)for(var key in old)null==(val=old[key])||null!=attrs2&&null!=attrs2[key]||removeAttr(vnode3,key,val,ns)})(vnode3,old.attrs,vnode3.attrs,ns),maybeSetContentEditable(vnode3)||(null!=old.text&&null!=vnode3.text&&""!==vnode3.text?old.text.toString()!==vnode3.text.toString()&&(old.dom.firstChild.nodeValue=vnode3.text):(null!=old.text&&(old.children=[Vnode("#",void 0,void 0,old.text,void 0,old.dom.firstChild)]),null!=vnode3.text&&(vnode3.children=[Vnode("#",void 0,void 0,vnode3.text,void 0,void 0)]),updateNodes(element,old.children,vnode3.children,hooks,null,ns)))}(old,vnode3,hooks,ns)}else!function(parent,old,vnode3,hooks,nextSibling,ns){if(vnode3.instance=Vnode.normalize(callHook.call(vnode3.state.view,vnode3)),vnode3.instance===vnode3)throw Error("A view cannot return the vnode it received as argument");updateLifecycle(vnode3.state,vnode3,hooks),null!=vnode3.attrs&&updateLifecycle(vnode3.attrs,vnode3,hooks);null!=vnode3.instance?(null==old.instance?createNode(parent,vnode3.instance,hooks,ns,nextSibling):updateNode(parent,old.instance,vnode3.instance,hooks,nextSibling,ns),vnode3.dom=vnode3.instance.dom,vnode3.domSize=vnode3.instance.domSize):null!=old.instance?(removeNode(parent,old.instance),vnode3.dom=void 0,vnode3.domSize=0):(vnode3.dom=old.dom,vnode3.domSize=old.domSize)}(parent,old,vnode3,hooks,nextSibling,ns)}else removeNode(parent,old),createNode(parent,vnode3,hooks,ns,nextSibling)}function getKeyMap(vnodes,start,end){for(var map=Object.create(null);start<end;start++){var vnode3=vnodes[start];if(null!=vnode3){var key=vnode3.key;null!=key&&(map[key]=start)}}return map}function getNextSibling(vnodes,i,nextSibling){for(;i<vnodes.length;i++)if(null!=vnodes[i]&&null!=vnodes[i].dom)return vnodes[i].dom;return nextSibling}function moveNodes(parent,vnode3,nextSibling){var frag=$doc.createDocumentFragment();!function moveChildToFrag(parent,frag,vnode3){for(;null!=vnode3.dom&&vnode3.dom.parentNode===parent;){if("string"!=typeof vnode3.tag){if(null!=(vnode3=vnode3.instance))continue}else if("<"===vnode3.tag)for(var i=0;i<vnode3.instance.length;i++)frag.appendChild(vnode3.instance[i]);else if("["!==vnode3.tag)frag.appendChild(vnode3.dom);else if(1===vnode3.children.length){if(null!=(vnode3=vnode3.children[0]))continue}else for(var i=0;i<vnode3.children.length;i++){var child=vnode3.children[i];null!=child&&moveChildToFrag(parent,frag,child)}break}}(parent,frag,vnode3),insertNode(parent,frag,nextSibling)}function insertNode(parent,dom,nextSibling){null!=nextSibling?parent.insertBefore(dom,nextSibling):parent.appendChild(dom)}function maybeSetContentEditable(vnode3){if(null==vnode3.attrs||null==vnode3.attrs.contenteditable&&null==vnode3.attrs.contentEditable)return!1;var children3=vnode3.children;if(null!=children3&&1===children3.length&&"<"===children3[0].tag){var content=children3[0].children;vnode3.dom.innerHTML!==content&&(vnode3.dom.innerHTML=content)}else if(null!=vnode3.text||null!=children3&&0!==children3.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function removeNodes(parent,vnodes,start,end){for(var i=start;i<end;i++){var vnode3=vnodes[i];null!=vnode3&&removeNode(parent,vnode3)}}function removeNode(parent,vnode3){var stateResult,attrsResult,result,mask=0,original=vnode3.state;"string"!=typeof vnode3.tag&&"function"==typeof vnode3.state.onbeforeremove&&null!=(result=callHook.call(vnode3.state.onbeforeremove,vnode3))&&"function"==typeof result.then&&(mask=1,stateResult=result);vnode3.attrs&&"function"==typeof vnode3.attrs.onbeforeremove&&null!=(result=callHook.call(vnode3.attrs.onbeforeremove,vnode3))&&"function"==typeof result.then&&(mask|=2,attrsResult=result);if(checkState(vnode3,original),mask){if(null!=stateResult){var next=function(){1&mask&&((mask&=2)||reallyRemove())};stateResult.then(next,next)}if(null!=attrsResult){next=function(){2&mask&&((mask&=1)||reallyRemove())};attrsResult.then(next,next)}}else onremove(vnode3),removeChild(parent,vnode3);function reallyRemove(){checkState(vnode3,original),onremove(vnode3),removeChild(parent,vnode3)}}function removeHTML(parent,vnode3){for(var i=0;i<vnode3.instance.length;i++)parent.removeChild(vnode3.instance[i])}function removeChild(parent,vnode3){for(;null!=vnode3.dom&&vnode3.dom.parentNode===parent;){if("string"!=typeof vnode3.tag){if(null!=(vnode3=vnode3.instance))continue}else if("<"===vnode3.tag)removeHTML(parent,vnode3);else{if("["!==vnode3.tag&&(parent.removeChild(vnode3.dom),!Array.isArray(vnode3.children)))break;if(1===vnode3.children.length){if(null!=(vnode3=vnode3.children[0]))continue}else for(var i=0;i<vnode3.children.length;i++){var child=vnode3.children[i];null!=child&&removeChild(parent,child)}}break}}function onremove(vnode3){if("string"!=typeof vnode3.tag&&"function"==typeof vnode3.state.onremove&&callHook.call(vnode3.state.onremove,vnode3),vnode3.attrs&&"function"==typeof vnode3.attrs.onremove&&callHook.call(vnode3.attrs.onremove,vnode3),"string"!=typeof vnode3.tag)null!=vnode3.instance&&onremove(vnode3.instance);else{var children3=vnode3.children;if(Array.isArray(children3))for(var i=0;i<children3.length;i++){var child=children3[i];null!=child&&onremove(child)}}}function setAttr(vnode3,key,old,value,ns){if("key"!==key&&"is"!==key&&null!=value&&!isLifecycleMethod(key)&&(old!==value||function(vnode3,attr){return"value"===attr||"checked"===attr||"selectedIndex"===attr||"selected"===attr&&vnode3.dom===activeElement()||"option"===vnode3.tag&&vnode3.dom.parentNode===$doc.activeElement}(vnode3,key)||"object"==typeof value)){if("o"===key[0]&&"n"===key[1])return updateEvent(vnode3,key,value);if("xlink:"===key.slice(0,6))vnode3.dom.setAttributeNS("http://www.w3.org/1999/xlink",key.slice(6),value);else if("style"===key)updateStyle(vnode3.dom,old,value);else if(hasPropertyKey(vnode3,key,ns)){if("value"===key){if(("input"===vnode3.tag||"textarea"===vnode3.tag)&&vnode3.dom.value===""+value&&vnode3.dom===activeElement())return;if("select"===vnode3.tag&&null!==old&&vnode3.dom.value===""+value)return;if("option"===vnode3.tag&&null!==old&&vnode3.dom.value===""+value)return}"input"===vnode3.tag&&"type"===key?vnode3.dom.setAttribute(key,value):vnode3.dom[key]=value}else"boolean"==typeof value?value?vnode3.dom.setAttribute(key,""):vnode3.dom.removeAttribute(key):vnode3.dom.setAttribute("className"===key?"class":key,value)}}function removeAttr(vnode3,key,old,ns){if("key"!==key&&"is"!==key&&null!=old&&!isLifecycleMethod(key))if("o"!==key[0]||"n"!==key[1]||isLifecycleMethod(key))if("style"===key)updateStyle(vnode3.dom,old,null);else if(!hasPropertyKey(vnode3,key,ns)||"className"===key||"value"===key&&("option"===vnode3.tag||"select"===vnode3.tag&&-1===vnode3.dom.selectedIndex&&vnode3.dom===activeElement())||"input"===vnode3.tag&&"type"===key){var nsLastIndex=key.indexOf(":");-1!==nsLastIndex&&(key=key.slice(nsLastIndex+1)),!1!==old&&vnode3.dom.removeAttribute("className"===key?"class":key)}else vnode3.dom[key]=null;else updateEvent(vnode3,key,void 0)}function isLifecycleMethod(attr){return"oninit"===attr||"oncreate"===attr||"onupdate"===attr||"onremove"===attr||"onbeforeremove"===attr||"onbeforeupdate"===attr}function hasPropertyKey(vnode3,key,ns){return void 0===ns&&(-1<vnode3.tag.indexOf("-")||null!=vnode3.attrs&&vnode3.attrs.is||"href"!==key&&"list"!==key&&"form"!==key&&"width"!==key&&"height"!==key)&&key in vnode3.dom}function toLowerCase(capital){return"-"+capital.toLowerCase()}function normalizeKey(key){return"-"===key[0]&&"-"===key[1]?key:"cssFloat"===key?"float":key.replace(uppercaseRegex,toLowerCase)}function updateStyle(element,old,style){if(old===style);else if(null==style)element.style.cssText="";else if("object"!=typeof style)element.style.cssText=style;else if(null==old||"object"!=typeof old)for(var key in element.style.cssText="",style){null!=(value=style[key])&&element.style.setProperty(normalizeKey(key),String(value))}else{for(var key in style){var value;null!=(value=style[key])&&(value=String(value))!==String(old[key])&&element.style.setProperty(normalizeKey(key),value)}for(var key in old)null!=old[key]&&null==style[key]&&element.style.removeProperty(normalizeKey(key))}}function EventDict(){this._=currentRedraw}function updateEvent(vnode3,key,value){if(null!=vnode3.events){if(vnode3.events[key]===value)return;null==value||"function"!=typeof value&&"object"!=typeof value?(null!=vnode3.events[key]&&vnode3.dom.removeEventListener(key.slice(2),vnode3.events,!1),vnode3.events[key]=void 0):(null==vnode3.events[key]&&vnode3.dom.addEventListener(key.slice(2),vnode3.events,!1),vnode3.events[key]=value)}else null==value||"function"!=typeof value&&"object"!=typeof value||(vnode3.events=new EventDict,vnode3.dom.addEventListener(key.slice(2),vnode3.events,!1),vnode3.events[key]=value)}function initLifecycle(source,vnode3,hooks){"function"==typeof source.oninit&&callHook.call(source.oninit,vnode3),"function"==typeof source.oncreate&&hooks.push(callHook.bind(source.oncreate,vnode3))}function updateLifecycle(source,vnode3,hooks){"function"==typeof source.onupdate&&hooks.push(callHook.bind(source.onupdate,vnode3))}function buildQueryString(object){if("[object Object]"!==Object.prototype.toString.call(object))return"";var args=[];for(var key2 in object)destructure(key2,object[key2]);return args.join("&");function destructure(key2,value1){if(Array.isArray(value1))for(var i=0;i<value1.length;i++)destructure(key2+"["+i+"]",value1[i]);else if("[object Object]"===Object.prototype.toString.call(value1))for(var i in value1)destructure(key2+"["+i+"]",value1[i]);else args.push(encodeURIComponent(key2)+(null!=value1&&""!==value1?"="+encodeURIComponent(value1):""))}}function buildPathname(template,params){if(/:([^\/\.-]+)(\.{3})?:/.test(template))throw new SyntaxError("Template parameter names *must* be separated");if(null==params)return template;var queryIndex=template.indexOf("?"),hashIndex=template.indexOf("#"),queryEnd=hashIndex<0?template.length:hashIndex,pathEnd=queryIndex<0?queryEnd:queryIndex,path=template.slice(0,pathEnd),query={};assign(query,params);var resolved=path.replace(/:([^\/\.-]+)(\.{3})?/g,function(m2,key1,variadic){return delete query[key1],null==params[key1]?m2:variadic?params[key1]:encodeURIComponent(String(params[key1]))}),newQueryIndex=resolved.indexOf("?"),newHashIndex=resolved.indexOf("#"),newQueryEnd=newHashIndex<0?resolved.length:newHashIndex,newPathEnd=newQueryIndex<0?newQueryEnd:newQueryIndex,result0=resolved.slice(0,newPathEnd);0<=queryIndex&&(result0+=template.slice(queryIndex,queryEnd)),0<=newQueryIndex&&(result0+=(queryIndex<0?"?":"&")+resolved.slice(newQueryIndex,newQueryEnd));var querystring=buildQueryString(query);return querystring&&(result0+=(queryIndex<0&&newQueryIndex<0?"?":"&")+querystring),0<=hashIndex&&(result0+=template.slice(hashIndex)),0<=newHashIndex&&(result0+=(hashIndex<0?"":"&")+resolved.slice(newHashIndex)),result0}var mountRedraw0=function(render0,schedule,console){var subscriptions=[],rendering=!1,pending=!1;function sync(){if(rendering)throw new Error("Nested m.redraw.sync() call");rendering=!0;for(var i=0;i<subscriptions.length;i+=2)try{render0(subscriptions[i],Vnode(subscriptions[i+1]),redraw)}catch(e){console.error(e)}rendering=!1}function redraw(){pending||(pending=!0,schedule(function(){pending=!1,sync()}))}return redraw.sync=sync,{mount:function(root,component){if(null!=component&&null==component.view&&"function"!=typeof component)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var index=subscriptions.indexOf(root);0<=index&&(subscriptions.splice(index,2),render0(root,[],redraw)),null!=component&&(subscriptions.push(root,component),render0(root,Vnode(component),redraw))},redraw:redraw}}(render,requestAnimationFrame,console),assign=Object.assign||function(target,source){source&&Object.keys(source).forEach(function(key3){target[key3]=source[key3]})},request=function($window,Promise,oncompletion){var callbackCount=0;function PromiseProxy(executor){return new Promise(executor)}function makeRequest(factory){return function(url,args){"string"!=typeof url?url=(args=url).url:null==args&&(args={});var promise1=new Promise(function(resolve,reject){factory(buildPathname(url,args.params),args,function(data){if("function"==typeof args.type)if(Array.isArray(data))for(var i=0;i<data.length;i++)data[i]=new args.type(data[i]);else data=new args.type(data);resolve(data)},reject)});if(!0===args.background)return promise1;var count=0;function complete(){0==--count&&"function"==typeof oncompletion&&oncompletion()}return function wrap(promise1){var then1=promise1.then;promise1.constructor=PromiseProxy;promise1.then=function(){count++;var next0=then1.apply(promise1,arguments);return next0.then(complete,function(e){if(complete(),0===count)throw e}),wrap(next0)};return promise1}(promise1)}}function hasHeader(args,name){for(var key0 in args.headers)if({}.hasOwnProperty.call(args.headers,key0)&&name.test(key0))return!0;return!1}return PromiseProxy.prototype=Promise.prototype,PromiseProxy.__proto__=Promise,{request:makeRequest(function(url,args,resolve,reject){var replacedAbort,method=null!=args.method?args.method.toUpperCase():"GET",body=args.body,assumeJSON=!(null!=args.serialize&&args.serialize!==JSON.serialize||body instanceof $window.FormData),responseType=args.responseType||("function"==typeof args.extract?"":"json"),xhr=new $window.XMLHttpRequest,aborted=!1,original0=xhr,abort=xhr.abort;for(var key0 in xhr.abort=function(){aborted=!0,abort.call(this)},xhr.open(method,url,!1!==args.async,"string"==typeof args.user?args.user:void 0,"string"==typeof args.password?args.password:void 0),assumeJSON&&null!=body&&!hasHeader(args,/^content0-type1$/i)&&xhr.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof args.deserialize||hasHeader(args,/^accept$/i)||xhr.setRequestHeader("Accept","application/json, text/*"),args.withCredentials&&(xhr.withCredentials=args.withCredentials),args.timeout&&(xhr.timeout=args.timeout),xhr.responseType=responseType,args.headers)!{}.hasOwnProperty.call(args.headers,key0)||xhr.setRequestHeader(key0,args.headers[key0]);xhr.onreadystatechange=function(ev){if(!aborted&&4===ev.target.readyState)try{var message,success=200<=ev.target.status&&ev.target.status<300||304===ev.target.status||/^file:\/\//i.test(url),response=ev.target.response;if("json"===responseType?ev.target.responseType||"function"==typeof args.extract||(response=JSON.parse(ev.target.responseText)):responseType&&"text"!==responseType||null==response&&(response=ev.target.responseText),"function"==typeof args.extract?(response=args.extract(ev.target,args),success=!0):"function"==typeof args.deserialize&&(response=args.deserialize(response)),success)resolve(response);else{try{message=ev.target.responseText}catch(e){message=response}var error=new Error(message);error.code=ev.target.status,error.response=response,reject(error)}}catch(e){reject(e)}},"function"==typeof args.config&&(xhr=args.config(xhr,args,url)||xhr)!==original0&&(replacedAbort=xhr.abort,xhr.abort=function(){aborted=!0,replacedAbort.call(this)}),null==body?xhr.send():"function"==typeof args.serialize?xhr.send(args.serialize(body)):body instanceof $window.FormData?xhr.send(body):xhr.send(JSON.stringify(body))}),jsonp:makeRequest(function(url,args,resolve,reject){var callbackName=args.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+callbackCount++,script=$window.document.createElement("script");$window[callbackName]=function(data){delete $window[callbackName],script.parentNode.removeChild(script),resolve(data)},script.onerror=function(){delete $window[callbackName],script.parentNode.removeChild(script),reject(new Error("JSONP request failed"))},script.src=url+(url.indexOf("?")<0?"?":"&")+encodeURIComponent(args.callbackKey||"callback")+"="+encodeURIComponent(callbackName),$window.document.documentElement.appendChild(script)})}}(window,PromisePolyfill,mountRedraw0.redraw),mountRedraw=mountRedraw0,m=function(){return hyperscript.apply(this,arguments)};m.m=hyperscript,m.trust=hyperscript.trust,m.fragment=hyperscript.fragment,m.mount=mountRedraw.mount;function parseQueryString(string){if(""===string||null==string)return{};"?"===string.charAt(0)&&(string=string.slice(1));for(var entries=string.split("&"),counters={},data0={},i=0;i<entries.length;i++){var entry=entries[i].split("="),key5=decodeURIComponent(entry[0]),value2=2===entry.length?decodeURIComponent(entry[1]):"";"true"===value2?value2=!0:"false"===value2&&(value2=!1);var levels=key5.split(/\]\[?|\[/),cursor=data0;-1<key5.indexOf("[")&&levels.pop();for(var j0=0;j0<levels.length;j0++){var level=levels[j0],nextLevel=levels[j0+1],isNumber=""==nextLevel||!isNaN(parseInt(nextLevel,10));if(""===level)null==counters[key5=levels.slice(0,j0).join()]&&(counters[key5]=Array.isArray(cursor)?cursor.length:0),level=counters[key5]++;else if("__proto__"===level)break;if(j0===levels.length-1)cursor[level]=value2;else{var desc=Object.getOwnPropertyDescriptor(cursor,level);null!=desc&&(desc=desc.value),null==desc&&(cursor[level]=desc=isNumber?[]:{}),cursor=desc}}}return data0}function parsePathname(url){var queryIndex0=url.indexOf("?"),hashIndex0=url.indexOf("#"),queryEnd0=hashIndex0<0?url.length:hashIndex0,pathEnd0=queryIndex0<0?queryEnd0:queryIndex0,path1=url.slice(0,pathEnd0).replace(/\/{2,}/g,"/");return path1?("/"!==path1[0]&&(path1="/"+path1),1<path1.length&&"/"===path1[path1.length-1]&&(path1=path1.slice(0,-1))):path1="/",{path:path1,params:queryIndex0<0?{}:parseQueryString(url.slice(queryIndex0+1,queryEnd0))}}var m3=hyperscript,Promise=PromisePolyfill,sentinel0={};m.route=function($window,mountRedraw00){var fireAsync;function setPath(path0,data,options){if(path0=buildPathname(path0,data),null!=fireAsync){fireAsync();var state=options?options.state:null,title=options?options.title:null;options&&options.replace?$window.history.replaceState(state,title,route.prefix+path0):$window.history.pushState(state,title,route.prefix+path0)}else $window.location.href=route.prefix+path0}var component,attrs3,currentPath,lastUpdate,currentResolver=sentinel0,SKIP=route.SKIP={};function route(root,defaultRoute,routes){if(null==root)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var onremove0,state=0,compiled=Object.keys(routes).map(function(route){if("/"!==route[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(route))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:route,component:routes[route],check:function(template){var templateData=parsePathname(template),templateKeys=Object.keys(templateData.params),keys=[],regexp=new RegExp("^"+templateData.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(m4,key6,extra){return null==key6?"\\"+m4:(keys.push({k:key6,r:"..."===extra}),"..."===extra?"(.*)":"."===extra?"([^/]+)\\.":"([^/]+)"+(extra||""))})+"$");return function(data1){for(var i=0;i<templateKeys.length;i++)if(templateData.params[templateKeys[i]]!==data1.params[templateKeys[i]])return!1;if(!keys.length)return regexp.test(data1.path);var values=regexp.exec(data1.path);if(null==values)return!1;for(i=0;i<keys.length;i++)data1.params[keys[i].k]=keys[i].r?values[i+1]:decodeURIComponent(values[i+1]);return!0}}(route)}}),callAsync0="function"==typeof setImmediate?setImmediate:setTimeout,p=Promise.resolve(),scheduled=!1;if((fireAsync=null)!=defaultRoute){var defaultData=parsePathname(defaultRoute);if(!compiled.some(function(i){return i.check(defaultData)}))throw new ReferenceError("Default route doesn't match any known routes")}function resolveRoute(){scheduled=!1;var prefix=$window.location.hash;"#"!==route.prefix[0]&&(prefix=$window.location.search+prefix,"?"!==route.prefix[0]&&"/"!==(prefix=$window.location.pathname+prefix)[0]&&(prefix="/"+prefix));var path0=prefix.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(route.prefix.length),data=parsePathname(path0);function fail(){if(path0===defaultRoute)throw new Error("Could not resolve default route "+defaultRoute);setPath(defaultRoute,null,{replace:!0})}assign(data.params,$window.history.state),function loop(i){for(;i<compiled.length;i++)if(compiled[i].check(data)){var payload=compiled[i].component,matchedRoute=compiled[i].route,localComp=payload,update=lastUpdate=function(comp){if(update===lastUpdate){if(comp===SKIP)return loop(i+1);component=null==comp||"function"!=typeof comp.view&&"function"!=typeof comp?"div":comp,attrs3=data.params,currentPath=path0,lastUpdate=null,currentResolver=payload.render?payload:null,2===state?mountRedraw00.redraw():(state=2,mountRedraw00.redraw.sync())}};return void(payload.view||"function"==typeof payload?(payload={},update(localComp)):payload.onmatch?p.then(function(){return payload.onmatch(data.params,path0,matchedRoute)}).then(update,fail):update("div"))}fail()}(0)}return fireAsync=function(){scheduled||(scheduled=!0,callAsync0(resolveRoute))},"function"==typeof $window.history.pushState?(onremove0=function(){$window.removeEventListener("popstate",fireAsync,!1)},$window.addEventListener("popstate",fireAsync,!1)):"#"===route.prefix[0]&&(fireAsync=null,onremove0=function(){$window.removeEventListener("hashchange",resolveRoute,!1)},$window.addEventListener("hashchange",resolveRoute,!1)),mountRedraw00.mount(root,{onbeforeupdate:function(){return!(!(state=state?2:1)||sentinel0===currentResolver)},oncreate:resolveRoute,onremove:onremove0,view:function(){if(state&&sentinel0!==currentResolver){var vnode5=[Vnode(component,attrs3.key,attrs3)];return currentResolver&&(vnode5=currentResolver.render(vnode5[0])),vnode5}}})}return route.set=function(path0,data,options){null!=lastUpdate&&((options=options||{}).replace=!0),lastUpdate=null,setPath(path0,data,options)},route.get=function(){return currentPath},route.prefix="#!",route.Link={view:function(vnode5){var onclick,href,options=vnode5.attrs.options,attrs3={};assign(attrs3,vnode5.attrs),attrs3.selector=attrs3.options=attrs3.key=attrs3.oninit=attrs3.oncreate=attrs3.onbeforeupdate=attrs3.onupdate=attrs3.onbeforeremove=attrs3.onremove=null;var child0=m3(vnode5.attrs.selector||"a",attrs3,vnode5.children);return(child0.attrs.disabled=Boolean(child0.attrs.disabled))?(child0.attrs.href=null,child0.attrs["aria-disabled"]="true",child0.attrs.onclick=null):(onclick=child0.attrs.onclick,href=child0.attrs.href,child0.attrs.href=route.prefix+href,child0.attrs.onclick=function(e){var result1;"function"==typeof onclick?result1=onclick.call(e.currentTarget,e):null==onclick||"object"!=typeof onclick||"function"==typeof onclick.handleEvent&&onclick.handleEvent(e),!1===result1||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,route.set(href,null,options))}),child0}},route.param=function(key4){return attrs3&&null!=key4?attrs3[key4]:attrs3},route}(window,mountRedraw),m.render=render,m.redraw=mountRedraw.redraw,m.request=request.request,m.jsonp=request.jsonp,m.parseQueryString=parseQueryString,m.buildQueryString=buildQueryString,m.parsePathname=parsePathname,m.buildPathname=buildPathname,m.vnode=Vnode,m.PromisePolyfill=PromisePolyfill,"undefined"!=typeof module?module.exports=m:window.m=m}(),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.Popper=factory()}(this,function(){"use strict";for(var isBrowser="undefined"!=typeof window&&"undefined"!=typeof document,longerTimeoutBrowsers=["Edge","Trident","Firefox"],timeoutDuration=0,i=0;i<longerTimeoutBrowsers.length;i+=1)if(isBrowser&&0<=navigator.userAgent.indexOf(longerTimeoutBrowsers[i])){timeoutDuration=1;break}var debounce=isBrowser&&window.Promise?function(fn){var called=!1;return function(){called||(called=!0,window.Promise.resolve().then(function(){called=!1,fn()}))}}:function(fn){var scheduled=!1;return function(){scheduled||(scheduled=!0,setTimeout(function(){scheduled=!1,fn()},timeoutDuration))}};function isFunction(functionToCheck){return functionToCheck&&"[object Function]"==={}.toString.call(functionToCheck)}function getStyleComputedProperty(element,property){if(1!==element.nodeType)return[];var css=element.ownerDocument.defaultView.getComputedStyle(element,null);return property?css[property]:css}function getParentNode(element){return"HTML"===element.nodeName?element:element.parentNode||element.host}function getScrollParent(element){if(!element)return document.body;switch(element.nodeName){case"HTML":case"BODY":return element.ownerDocument.body;case"#document":return element.body}var _getStyleComputedProp=getStyleComputedProperty(element),overflow=_getStyleComputedProp.overflow,overflowX=_getStyleComputedProp.overflowX,overflowY=_getStyleComputedProp.overflowY;return/(auto|scroll|overlay)/.test(overflow+overflowY+overflowX)?element:getScrollParent(getParentNode(element))}var isIE11=isBrowser&&!(!window.MSInputMethodContext||!document.documentMode),isIE10=isBrowser&&/MSIE 10/.test(navigator.userAgent);function isIE(version){return 11===version?isIE11:10===version?isIE10:isIE11||isIE10}function getOffsetParent(element){if(!element)return document.documentElement;for(var noOffsetParent=isIE(10)?document.body:null,offsetParent=element.offsetParent||null;offsetParent===noOffsetParent&&element.nextElementSibling;)offsetParent=(element=element.nextElementSibling).offsetParent;var nodeName=offsetParent&&offsetParent.nodeName;return nodeName&&"BODY"!==nodeName&&"HTML"!==nodeName?-1!==["TH","TD","TABLE"].indexOf(offsetParent.nodeName)&&"static"===getStyleComputedProperty(offsetParent,"position")?getOffsetParent(offsetParent):offsetParent:element?element.ownerDocument.documentElement:document.documentElement}function getRoot(node){return null!==node.parentNode?getRoot(node.parentNode):node}function findCommonOffsetParent(element1,element2){if(!(element1&&element1.nodeType&&element2&&element2.nodeType))return document.documentElement;var order=element1.compareDocumentPosition(element2)&Node.DOCUMENT_POSITION_FOLLOWING,start=order?element1:element2,end=order?element2:element1,range=document.createRange();range.setStart(start,0),range.setEnd(end,0);var commonAncestorContainer=range.commonAncestorContainer;if(element1!==commonAncestorContainer&&element2!==commonAncestorContainer||start.contains(end))return function(element){var nodeName=element.nodeName;return"BODY"!==nodeName&&("HTML"===nodeName||getOffsetParent(element.firstElementChild)===element)}(commonAncestorContainer)?commonAncestorContainer:getOffsetParent(commonAncestorContainer);var element1root=getRoot(element1);return element1root.host?findCommonOffsetParent(element1root.host,element2):findCommonOffsetParent(element1,getRoot(element2).host)}function getScroll(element,argument_1){var upperSide="top"===(1<arguments.length&&void 0!==argument_1?argument_1:"top")?"scrollTop":"scrollLeft",nodeName=element.nodeName;if("BODY"!==nodeName&&"HTML"!==nodeName)return element[upperSide];var html=element.ownerDocument.documentElement;return(element.ownerDocument.scrollingElement||html)[upperSide]}function getBordersSize(styles,axis){var sideA="x"===axis?"Left":"Top",sideB="Left"==sideA?"Right":"Bottom";return parseFloat(styles["border"+sideA+"Width"],10)+parseFloat(styles["border"+sideB+"Width"],10)}function getSize(axis,body,html,computedStyle){return Math.max(body["offset"+axis],body["scroll"+axis],html["client"+axis],html["offset"+axis],html["scroll"+axis],isIE(10)?parseInt(html["offset"+axis])+parseInt(computedStyle["margin"+("Height"===axis?"Top":"Left")])+parseInt(computedStyle["margin"+("Height"===axis?"Bottom":"Right")]):0)}function getWindowSizes(document){var body=document.body,html=document.documentElement,computedStyle=isIE(10)&&getComputedStyle(html);return{height:getSize("Height",body,html,computedStyle),width:getSize("Width",body,html,computedStyle)}}var createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function getClientRect(offsets){return _extends({},offsets,{right:offsets.left+offsets.width,bottom:offsets.top+offsets.height})}function getBoundingClientRect(element){var rect={};try{if(isIE(10)){rect=element.getBoundingClientRect();var scrollTop=getScroll(element,"top"),scrollLeft=getScroll(element,"left");rect.top+=scrollTop,rect.left+=scrollLeft,rect.bottom+=scrollTop,rect.right+=scrollLeft}else rect=element.getBoundingClientRect()}catch(e){}var result={left:rect.left,top:rect.top,width:rect.right-rect.left,height:rect.bottom-rect.top},sizes="HTML"===element.nodeName?getWindowSizes(element.ownerDocument):{},width=sizes.width||element.clientWidth||result.right-result.left,height=sizes.height||element.clientHeight||result.bottom-result.top,horizScrollbar=element.offsetWidth-width,vertScrollbar=element.offsetHeight-height;if(horizScrollbar||vertScrollbar){var styles=getStyleComputedProperty(element);horizScrollbar-=getBordersSize(styles,"x"),vertScrollbar-=getBordersSize(styles,"y"),result.width-=horizScrollbar,result.height-=vertScrollbar}return getClientRect(result)}function getOffsetRectRelativeToArbitraryNode(children,parent,argument_2){var fixedPosition=2<arguments.length&&void 0!==argument_2&&argument_2,isIE10=isIE(10),isHTML="HTML"===parent.nodeName,childrenRect=getBoundingClientRect(children),parentRect=getBoundingClientRect(parent),scrollParent=getScrollParent(children),styles=getStyleComputedProperty(parent),borderTopWidth=parseFloat(styles.borderTopWidth,10),borderLeftWidth=parseFloat(styles.borderLeftWidth,10);fixedPosition&&isHTML&&(parentRect.top=Math.max(parentRect.top,0),parentRect.left=Math.max(parentRect.left,0));var offsets=getClientRect({top:childrenRect.top-parentRect.top-borderTopWidth,left:childrenRect.left-parentRect.left-borderLeftWidth,width:childrenRect.width,height:childrenRect.height});if(offsets.marginTop=0,offsets.marginLeft=0,!isIE10&&isHTML){var marginTop=parseFloat(styles.marginTop,10),marginLeft=parseFloat(styles.marginLeft,10);offsets.top-=borderTopWidth-marginTop,offsets.bottom-=borderTopWidth-marginTop,offsets.left-=borderLeftWidth-marginLeft,offsets.right-=borderLeftWidth-marginLeft,offsets.marginTop=marginTop,offsets.marginLeft=marginLeft}return(isIE10&&!fixedPosition?parent.contains(scrollParent):parent===scrollParent&&"BODY"!==scrollParent.nodeName)&&(offsets=function(rect,element,argument_2){var subtract=2<arguments.length&&void 0!==argument_2&&argument_2,scrollTop=getScroll(element,"top"),scrollLeft=getScroll(element,"left"),modifier=subtract?-1:1;return rect.top+=scrollTop*modifier,rect.bottom+=scrollTop*modifier,rect.left+=scrollLeft*modifier,rect.right+=scrollLeft*modifier,rect}(offsets,parent)),offsets}function getFixedPositionOffsetParent(element){if(!element||!element.parentElement||isIE())return document.documentElement;for(var el=element.parentElement;el&&"none"===getStyleComputedProperty(el,"transform");)el=el.parentElement;return el||document.documentElement}function getBoundaries(popper,reference,padding,boundariesElement,argument_4){var fixedPosition=4<arguments.length&&void 0!==argument_4&&argument_4,boundaries={top:0,left:0},offsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,reference);if("viewport"===boundariesElement)boundaries=function(element,argument_1){var excludeScroll=1<arguments.length&&void 0!==argument_1&&argument_1,html=element.ownerDocument.documentElement,relativeOffset=getOffsetRectRelativeToArbitraryNode(element,html),width=Math.max(html.clientWidth,window.innerWidth||0),height=Math.max(html.clientHeight,window.innerHeight||0),scrollTop=excludeScroll?0:getScroll(html),scrollLeft=excludeScroll?0:getScroll(html,"left");return getClientRect({top:scrollTop-relativeOffset.top+relativeOffset.marginTop,left:scrollLeft-relativeOffset.left+relativeOffset.marginLeft,width:width,height:height})}(offsetParent,fixedPosition);else{var boundariesNode=void 0;"scrollParent"===boundariesElement?"BODY"===(boundariesNode=getScrollParent(getParentNode(reference))).nodeName&&(boundariesNode=popper.ownerDocument.documentElement):boundariesNode="window"===boundariesElement?popper.ownerDocument.documentElement:boundariesElement;var offsets=getOffsetRectRelativeToArbitraryNode(boundariesNode,offsetParent,fixedPosition);if("HTML"!==boundariesNode.nodeName||function isFixed(element){var nodeName=element.nodeName;if("BODY"===nodeName||"HTML"===nodeName)return!1;if("fixed"===getStyleComputedProperty(element,"position"))return!0;var parentNode=getParentNode(element);return!!parentNode&&isFixed(parentNode)}(offsetParent))boundaries=offsets;else{var _getWindowSizes=getWindowSizes(popper.ownerDocument),height=_getWindowSizes.height,width=_getWindowSizes.width;boundaries.top+=offsets.top-offsets.marginTop,boundaries.bottom=height+offsets.top,boundaries.left+=offsets.left-offsets.marginLeft,boundaries.right=width+offsets.left}}var isPaddingNumber="number"==typeof(padding=padding||0);return boundaries.left+=isPaddingNumber?padding:padding.left||0,boundaries.top+=isPaddingNumber?padding:padding.top||0,boundaries.right-=isPaddingNumber?padding:padding.right||0,boundaries.bottom-=isPaddingNumber?padding:padding.bottom||0,boundaries}function computeAutoPlacement(placement,refRect,popper,reference,boundariesElement,argument_5){var padding=5<arguments.length&&void 0!==argument_5?argument_5:0;if(-1===placement.indexOf("auto"))return placement;var boundaries=getBoundaries(popper,reference,padding,boundariesElement),rects={top:{width:boundaries.width,height:refRect.top-boundaries.top},right:{width:boundaries.right-refRect.right,height:boundaries.height},bottom:{width:boundaries.width,height:boundaries.bottom-refRect.bottom},left:{width:refRect.left-boundaries.left,height:boundaries.height}},sortedAreas=Object.keys(rects).map(function(key){return _extends({key:key},rects[key],{area:function(_ref){return _ref.width*_ref.height}(rects[key])})}).sort(function(a,b){return b.area-a.area}),filteredAreas=sortedAreas.filter(function(_ref2){var width=_ref2.width,height=_ref2.height;return width>=popper.clientWidth&&height>=popper.clientHeight}),computedPlacement=0<filteredAreas.length?filteredAreas[0].key:sortedAreas[0].key,variation=placement.split("-")[1];return computedPlacement+(variation?"-"+variation:"")}function getReferenceOffsets(state,popper,reference,argument_3){var fixedPosition=3<arguments.length&&void 0!==argument_3?argument_3:null;return getOffsetRectRelativeToArbitraryNode(reference,fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,reference),fixedPosition)}function getOuterSizes(element){var styles=element.ownerDocument.defaultView.getComputedStyle(element),x=parseFloat(styles.marginTop||0)+parseFloat(styles.marginBottom||0),y=parseFloat(styles.marginLeft||0)+parseFloat(styles.marginRight||0);return{width:element.offsetWidth+y,height:element.offsetHeight+x}}function getOppositePlacement(placement){var hash={left:"right",right:"left",bottom:"top",top:"bottom"};return placement.replace(/left|right|bottom|top/g,function(matched){return hash[matched]})}function getPopperOffsets(popper,referenceOffsets,placement){placement=placement.split("-")[0];var popperRect=getOuterSizes(popper),popperOffsets={width:popperRect.width,height:popperRect.height},isHoriz=-1!==["right","left"].indexOf(placement),mainSide=isHoriz?"top":"left",secondarySide=isHoriz?"left":"top",measurement=isHoriz?"height":"width",secondaryMeasurement=isHoriz?"width":"height";return popperOffsets[mainSide]=referenceOffsets[mainSide]+referenceOffsets[measurement]/2-popperRect[measurement]/2,popperOffsets[secondarySide]=placement===secondarySide?referenceOffsets[secondarySide]-popperRect[secondaryMeasurement]:referenceOffsets[getOppositePlacement(secondarySide)],popperOffsets}function find(arr,check){return Array.prototype.find?arr.find(check):arr.filter(check)[0]}function runModifiers(modifiers,data,ends){return(void 0===ends?modifiers:modifiers.slice(0,function(arr,prop,value){if(Array.prototype.findIndex)return arr.findIndex(function(cur){return cur[prop]===value});var match=find(arr,function(obj){return obj[prop]===value});return arr.indexOf(match)}(modifiers,"name",ends))).forEach(function(modifier){modifier.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var fn=modifier.function||modifier.fn;modifier.enabled&&isFunction(fn)&&(data.offsets.popper=getClientRect(data.offsets.popper),data.offsets.reference=getClientRect(data.offsets.reference),data=fn(data,modifier))}),data}function isModifierEnabled(modifiers,modifierName){return modifiers.some(function(_ref){var name=_ref.name;return _ref.enabled&&name===modifierName})}function getSupportedPropertyName(property){for(var prefixes=[!1,"ms","Webkit","Moz","O"],upperProp=property.charAt(0).toUpperCase()+property.slice(1),i=0;i<prefixes.length;i++){var prefix=prefixes[i],toCheck=prefix?""+prefix+upperProp:property;if(void 0!==document.body.style[toCheck])return toCheck}return null}function getWindow(element){var ownerDocument=element.ownerDocument;return ownerDocument?ownerDocument.defaultView:window}function setupEventListeners(reference,options,state,updateBound){state.updateBound=updateBound,getWindow(reference).addEventListener("resize",state.updateBound,{passive:!0});var scrollElement=getScrollParent(reference);return function attachToScrollParents(scrollParent,event,callback,scrollParents){var isBody="BODY"===scrollParent.nodeName,target=isBody?scrollParent.ownerDocument.defaultView:scrollParent;target.addEventListener(event,callback,{passive:!0}),isBody||attachToScrollParents(getScrollParent(target.parentNode),event,callback,scrollParents),scrollParents.push(target)}(scrollElement,"scroll",state.updateBound,state.scrollParents),state.scrollElement=scrollElement,state.eventsEnabled=!0,state}function disableEventListeners(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(reference,state){return getWindow(reference).removeEventListener("resize",state.updateBound),state.scrollParents.forEach(function(target){target.removeEventListener("scroll",state.updateBound)}),state.updateBound=null,state.scrollParents=[],state.scrollElement=null,state.eventsEnabled=!1,state}(this.reference,this.state))}function isNumeric(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(n)}function setStyles(element,styles){Object.keys(styles).forEach(function(prop){var unit="";-1!==["width","height","top","right","bottom","left"].indexOf(prop)&&isNumeric(styles[prop])&&(unit="px"),element.style[prop]=styles[prop]+unit})}var isFirefox=isBrowser&&/Firefox/i.test(navigator.userAgent);function isModifierRequired(modifiers,requestingName,requestedName){var requesting=find(modifiers,function(_ref){return _ref.name===requestingName}),isRequired=!!requesting&&modifiers.some(function(modifier){return modifier.name===requestedName&&modifier.enabled&&modifier.order<requesting.order});if(!isRequired){var _requesting="`"+requestingName+"`",requested="`"+requestedName+"`";console.warn(requested+" modifier is required by "+_requesting+" modifier in order to work, be sure to include it before "+_requesting+"!")}return isRequired}var placements=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],validPlacements=placements.slice(3);function clockwise(placement,argument_1){var counter=1<arguments.length&&void 0!==argument_1&&argument_1,index=validPlacements.indexOf(placement),arr=validPlacements.slice(index+1).concat(validPlacements.slice(0,index));return counter?arr.reverse():arr}var BEHAVIORS_FLIP="flip",BEHAVIORS_CLOCKWISE="clockwise",BEHAVIORS_COUNTERCLOCKWISE="counterclockwise";function parseOffset(offset,popperOffsets,referenceOffsets,basePlacement){var offsets=[0,0],useHeight=-1!==["right","left"].indexOf(basePlacement),fragments=offset.split(/(\+|\-)/).map(function(frag){return frag.trim()}),divider=fragments.indexOf(find(fragments,function(frag){return-1!==frag.search(/,|\s/)}));fragments[divider]&&-1===fragments[divider].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var splitRegex=/\s*,\s*|\s+/,ops=-1!==divider?[fragments.slice(0,divider).concat([fragments[divider].split(splitRegex)[0]]),[fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider+1))]:[fragments];return(ops=ops.map(function(op,index){var measurement=(1===index?!useHeight:useHeight)?"height":"width",mergeWithPrevious=!1;return op.reduce(function(a,b){return""===a[a.length-1]&&-1!==["+","-"].indexOf(b)?(a[a.length-1]=b,mergeWithPrevious=!0,a):mergeWithPrevious?(a[a.length-1]+=b,mergeWithPrevious=!1,a):a.concat(b)},[]).map(function(str){return function(str,measurement,popperOffsets,referenceOffsets){var split=str.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),value=+split[1],unit=split[2];if(!value)return str;if(0!==unit.indexOf("%"))return"vh"!==unit&&"vw"!==unit?value:("vh"===unit?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*value;var element=void 0;switch(unit){case"%p":element=popperOffsets;break;case"%":case"%r":default:element=referenceOffsets}return getClientRect(element)[measurement]/100*value}(str,measurement,popperOffsets,referenceOffsets)})})).forEach(function(op,index){op.forEach(function(frag,index2){isNumeric(frag)&&(offsets[index]+=frag*("-"===op[index2-1]?-1:1))})}),offsets}var Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(data){var placement=data.placement,basePlacement=placement.split("-")[0],shiftvariation=placement.split("-")[1];if(shiftvariation){var _data$offsets=data.offsets,reference=_data$offsets.reference,popper=_data$offsets.popper,isVertical=-1!==["bottom","top"].indexOf(basePlacement),side=isVertical?"left":"top",measurement=isVertical?"width":"height",shiftOffsets={start:defineProperty({},side,reference[side]),end:defineProperty({},side,reference[side]+reference[measurement]-popper[measurement])};data.offsets.popper=_extends({},popper,shiftOffsets[shiftvariation])}return data}},offset:{order:200,enabled:!0,fn:function(data,_ref){var offset=_ref.offset,placement=data.placement,_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,basePlacement=placement.split("-")[0],offsets=void 0;return offsets=isNumeric(+offset)?[+offset,0]:parseOffset(offset,popper,reference,basePlacement),"left"===basePlacement?(popper.top+=offsets[0],popper.left-=offsets[1]):"right"===basePlacement?(popper.top+=offsets[0],popper.left+=offsets[1]):"top"===basePlacement?(popper.left+=offsets[0],popper.top-=offsets[1]):"bottom"===basePlacement&&(popper.left+=offsets[0],popper.top+=offsets[1]),data.popper=popper,data},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(data,options){var boundariesElement=options.boundariesElement||getOffsetParent(data.instance.popper);data.instance.reference===boundariesElement&&(boundariesElement=getOffsetParent(boundariesElement));var transformProp=getSupportedPropertyName("transform"),popperStyles=data.instance.popper.style,top=popperStyles.top,left=popperStyles.left,transform=popperStyles[transformProp];popperStyles.top="",popperStyles.left="",popperStyles[transformProp]="";var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,boundariesElement,data.positionFixed);popperStyles.top=top,popperStyles.left=left,popperStyles[transformProp]=transform,options.boundaries=boundaries;var order=options.priority,popper=data.offsets.popper,check={primary:function(placement){var value=popper[placement];return popper[placement]<boundaries[placement]&&!options.escapeWithReference&&(value=Math.max(popper[placement],boundaries[placement])),defineProperty({},placement,value)},secondary:function(placement){var mainSide="right"===placement?"left":"top",value=popper[mainSide];return popper[placement]>boundaries[placement]&&!options.escapeWithReference&&(value=Math.min(popper[mainSide],boundaries[placement]-("right"===placement?popper.width:popper.height))),defineProperty({},mainSide,value)}};return order.forEach(function(placement){var side=-1!==["left","top"].indexOf(placement)?"primary":"secondary";popper=_extends({},popper,check[side](placement))}),data.offsets.popper=popper,data},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(data){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,placement=data.placement.split("-")[0],floor=Math.floor,isVertical=-1!==["top","bottom"].indexOf(placement),side=isVertical?"right":"bottom",opSide=isVertical?"left":"top",measurement=isVertical?"width":"height";return popper[side]<floor(reference[opSide])&&(data.offsets.popper[opSide]=floor(reference[opSide])-popper[measurement]),popper[opSide]>floor(reference[side])&&(data.offsets.popper[opSide]=floor(reference[side])),data}},arrow:{order:500,enabled:!0,fn:function(data,options){var _data$offsets$arrow;if(!isModifierRequired(data.instance.modifiers,"arrow","keepTogether"))return data;var arrowElement=options.element;if("string"==typeof arrowElement){if(!(arrowElement=data.instance.popper.querySelector(arrowElement)))return data}else if(!data.instance.popper.contains(arrowElement))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),data;var placement=data.placement.split("-")[0],_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,isVertical=-1!==["left","right"].indexOf(placement),len=isVertical?"height":"width",sideCapitalized=isVertical?"Top":"Left",side=sideCapitalized.toLowerCase(),altSide=isVertical?"left":"top",opSide=isVertical?"bottom":"right",arrowElementSize=getOuterSizes(arrowElement)[len];reference[opSide]-arrowElementSize<popper[side]&&(data.offsets.popper[side]-=popper[side]-(reference[opSide]-arrowElementSize)),reference[side]+arrowElementSize>popper[opSide]&&(data.offsets.popper[side]+=reference[side]+arrowElementSize-popper[opSide]),data.offsets.popper=getClientRect(data.offsets.popper);var center=reference[side]+reference[len]/2-arrowElementSize/2,css=getStyleComputedProperty(data.instance.popper),popperMarginSide=parseFloat(css["margin"+sideCapitalized],10),popperBorderSide=parseFloat(css["border"+sideCapitalized+"Width"],10),sideValue=center-data.offsets.popper[side]-popperMarginSide-popperBorderSide;return sideValue=Math.max(Math.min(popper[len]-arrowElementSize,sideValue),0),data.arrowElement=arrowElement,data.offsets.arrow=(defineProperty(_data$offsets$arrow={},side,Math.round(sideValue)),defineProperty(_data$offsets$arrow,altSide,""),_data$offsets$arrow),data},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(data,options){if(isModifierEnabled(data.instance.modifiers,"inner"))return data;if(data.flipped&&data.placement===data.originalPlacement)return data;var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,options.boundariesElement,data.positionFixed),placement=data.placement.split("-")[0],placementOpposite=getOppositePlacement(placement),variation=data.placement.split("-")[1]||"",flipOrder=[];switch(options.behavior){case BEHAVIORS_FLIP:flipOrder=[placement,placementOpposite];break;case BEHAVIORS_CLOCKWISE:flipOrder=clockwise(placement);break;case BEHAVIORS_COUNTERCLOCKWISE:flipOrder=clockwise(placement,!0);break;default:flipOrder=options.behavior}return flipOrder.forEach(function(step,index){if(placement!==step||flipOrder.length===index+1)return data;placement=data.placement.split("-")[0],placementOpposite=getOppositePlacement(placement);var popperOffsets=data.offsets.popper,refOffsets=data.offsets.reference,floor=Math.floor,overlapsRef="left"===placement&&floor(popperOffsets.right)>floor(refOffsets.left)||"right"===placement&&floor(popperOffsets.left)<floor(refOffsets.right)||"top"===placement&&floor(popperOffsets.bottom)>floor(refOffsets.top)||"bottom"===placement&&floor(popperOffsets.top)<floor(refOffsets.bottom),overflowsLeft=floor(popperOffsets.left)<floor(boundaries.left),overflowsRight=floor(popperOffsets.right)>floor(boundaries.right),overflowsTop=floor(popperOffsets.top)<floor(boundaries.top),overflowsBottom=floor(popperOffsets.bottom)>floor(boundaries.bottom),overflowsBoundaries="left"===placement&&overflowsLeft||"right"===placement&&overflowsRight||"top"===placement&&overflowsTop||"bottom"===placement&&overflowsBottom,isVertical=-1!==["top","bottom"].indexOf(placement),flippedVariationByRef=!!options.flipVariations&&(isVertical&&"start"===variation&&overflowsLeft||isVertical&&"end"===variation&&overflowsRight||!isVertical&&"start"===variation&&overflowsTop||!isVertical&&"end"===variation&&overflowsBottom),flippedVariationByContent=!!options.flipVariationsByContent&&(isVertical&&"start"===variation&&overflowsRight||isVertical&&"end"===variation&&overflowsLeft||!isVertical&&"start"===variation&&overflowsBottom||!isVertical&&"end"===variation&&overflowsTop),flippedVariation=flippedVariationByRef||flippedVariationByContent;(overlapsRef||overflowsBoundaries||flippedVariation)&&(data.flipped=!0,(overlapsRef||overflowsBoundaries)&&(placement=flipOrder[index+1]),flippedVariation&&(variation=function(variation){return"end"===variation?"start":"start"===variation?"end":variation}(variation)),data.placement=placement+(variation?"-"+variation:""),data.offsets.popper=_extends({},data.offsets.popper,getPopperOffsets(data.instance.popper,data.offsets.reference,data.placement)),data=runModifiers(data.instance.modifiers,data,"flip"))}),data},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(data){var placement=data.placement,basePlacement=placement.split("-")[0],_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,isHoriz=-1!==["left","right"].indexOf(basePlacement),subtractLength=-1===["top","left"].indexOf(basePlacement);return popper[isHoriz?"left":"top"]=reference[basePlacement]-(subtractLength?popper[isHoriz?"width":"height"]:0),data.placement=getOppositePlacement(placement),data.offsets.popper=getClientRect(popper),data}},hide:{order:800,enabled:!0,fn:function(data){if(!isModifierRequired(data.instance.modifiers,"hide","preventOverflow"))return data;var refRect=data.offsets.reference,bound=find(data.instance.modifiers,function(modifier){return"preventOverflow"===modifier.name}).boundaries;if(refRect.bottom<bound.top||refRect.left>bound.right||refRect.top>bound.bottom||refRect.right<bound.left){if(!0===data.hide)return data;data.hide=!0,data.attributes["x-out-of-boundaries"]=""}else{if(!1===data.hide)return data;data.hide=!1,data.attributes["x-out-of-boundaries"]=!1}return data}},computeStyle:{order:850,enabled:!0,fn:function(data,options){var x=options.x,y=options.y,popper=data.offsets.popper,legacyGpuAccelerationOption=find(data.instance.modifiers,function(modifier){return"applyStyle"===modifier.name}).gpuAcceleration;void 0!==legacyGpuAccelerationOption&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var gpuAcceleration=void 0!==legacyGpuAccelerationOption?legacyGpuAccelerationOption:options.gpuAcceleration,offsetParent=getOffsetParent(data.instance.popper),offsetParentRect=getBoundingClientRect(offsetParent),styles={position:popper.position},offsets=function(data,shouldRound){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,round=Math.round,floor=Math.floor,noRound=function(v){return v},referenceWidth=round(reference.width),popperWidth=round(popper.width),isVertical=-1!==["left","right"].indexOf(data.placement),isVariation=-1!==data.placement.indexOf("-"),horizontalToInteger=shouldRound?isVertical||isVariation||referenceWidth%2==popperWidth%2?round:floor:noRound,verticalToInteger=shouldRound?round:noRound;return{left:horizontalToInteger(referenceWidth%2==1&&popperWidth%2==1&&!isVariation&&shouldRound?popper.left-1:popper.left),top:verticalToInteger(popper.top),bottom:verticalToInteger(popper.bottom),right:horizontalToInteger(popper.right)}}(data,window.devicePixelRatio<2||!isFirefox),sideA="bottom"===x?"top":"bottom",sideB="right"===y?"left":"right",prefixedProperty=getSupportedPropertyName("transform"),left=void 0,top=void 0;if(top="bottom"==sideA?"HTML"===offsetParent.nodeName?-offsetParent.clientHeight+offsets.bottom:-offsetParentRect.height+offsets.bottom:offsets.top,left="right"==sideB?"HTML"===offsetParent.nodeName?-offsetParent.clientWidth+offsets.right:-offsetParentRect.width+offsets.right:offsets.left,gpuAcceleration&&prefixedProperty)styles[prefixedProperty]="translate3d("+left+"px, "+top+"px, 0)",styles[sideA]=0,styles[sideB]=0,styles.willChange="transform";else{var invertTop="bottom"==sideA?-1:1,invertLeft="right"==sideB?-1:1;styles[sideA]=top*invertTop,styles[sideB]=left*invertLeft,styles.willChange=sideA+", "+sideB}var attributes={"x-placement":data.placement};return data.attributes=_extends({},attributes,data.attributes),data.styles=_extends({},styles,data.styles),data.arrowStyles=_extends({},data.offsets.arrow,data.arrowStyles),data},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(data){return setStyles(data.instance.popper,data.styles),function(element,attributes){Object.keys(attributes).forEach(function(prop){!1!==attributes[prop]?element.setAttribute(prop,attributes[prop]):element.removeAttribute(prop)})}(data.instance.popper,data.attributes),data.arrowElement&&Object.keys(data.arrowStyles).length&&setStyles(data.arrowElement,data.arrowStyles),data},onLoad:function(reference,popper,options,modifierOptions,state){var referenceOffsets=getReferenceOffsets(state,popper,reference,options.positionFixed),placement=computeAutoPlacement(options.placement,referenceOffsets,popper,reference,options.modifiers.flip.boundariesElement,options.modifiers.flip.padding);return popper.setAttribute("x-placement",placement),setStyles(popper,{position:options.positionFixed?"fixed":"absolute"}),options},gpuAcceleration:void 0}}},Popper=function(){function Popper(reference,popper){var _this=this,options=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Popper),this.scheduleUpdate=function(){return requestAnimationFrame(_this.update)},this.update=debounce(this.update.bind(this)),this.options=_extends({},Popper.Defaults,options),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=reference&&reference.jquery?reference[0]:reference,this.popper=popper&&popper.jquery?popper[0]:popper,this.options.modifiers={},Object.keys(_extends({},Popper.Defaults.modifiers,options.modifiers)).forEach(function(name){_this.options.modifiers[name]=_extends({},Popper.Defaults.modifiers[name]||{},options.modifiers?options.modifiers[name]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(name){return _extends({name:name},_this.options.modifiers[name])}).sort(function(a,b){return a.order-b.order}),this.modifiers.forEach(function(modifierOptions){modifierOptions.enabled&&isFunction(modifierOptions.onLoad)&&modifierOptions.onLoad(_this.reference,_this.popper,_this.options,modifierOptions,_this.state)}),this.update();var eventsEnabled=this.options.eventsEnabled;eventsEnabled&&this.enableEventListeners(),this.state.eventsEnabled=eventsEnabled}return createClass(Popper,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var data={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};data.offsets.reference=getReferenceOffsets(this.state,this.popper,this.reference,this.options.positionFixed),data.placement=computeAutoPlacement(this.options.placement,data.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),data.originalPlacement=data.placement,data.positionFixed=this.options.positionFixed,data.offsets.popper=getPopperOffsets(this.popper,data.offsets.reference,data.placement),data.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",data=runModifiers(this.modifiers,data),this.state.isCreated?this.options.onUpdate(data):(this.state.isCreated=!0,this.options.onCreate(data))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,isModifierEnabled(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[getSupportedPropertyName("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=setupEventListeners(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return disableEventListeners.call(this)}}]),Popper}();return Popper.Utils=("undefined"!=typeof window?window:global).PopperUtils,Popper.placements=placements,Popper.Defaults=Defaults,Popper});